### ì—°ê´€ê´€ê³„ê°€ ë§ºì–´ì ¸ ìˆëŠ” ì—”í‹°í‹°ë“¤ ì§ì ‘ ë°˜í™˜ 

> ë‹¨ì¼ ì—”í‹°í‹°ê°€ ì•„ë‹ˆë¼ ë³µì¡í•˜ê²Œ ì—®ì—¬ìˆëŠ” ì—”í‹°í‹°ë“¤ì„ ë¬¶ì–´ì„œ ì¡°íšŒí•´ì•¼ í•œë‹¤ë©´?

```java
@GetMapping("/api/v1/simple-orders")
    public List<Order> orders()
    {
        List<Order> all = orderRepository.findAllByCriteria(new OrderSearch());
        return all;

        
    }
```
- ë§Œì•½ ì—”í‹°í‹°ë¥¼ ê·¸ëŒ€ë¡œ ë°˜í™˜í–ˆë‹¤ë©´ 
```shell
java.lang.StackOverflowError: null
```
ì´ë ‡ê²Œ ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°ê°€ ëœ¬ë‹¤. 
- â— Jsonìœ¼ë¡œ ë°˜í™˜ì‹œí‚¬ë•Œ 
```java
 @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "member_id")
    private Member member;
```
memberë¥¼ ì°¸ì¡°í•´ì„œ ë‚´ë¶€ë¡œ ë“¤ì–´ê°€ê³ ,
```java
@OneToMany(mappedBy = "member")
    private List<Order> orders = new ArrayList<>();
```
ë‹¤ì‹œ ordersë¥¼ ë§Œë‚˜ì„œ ì°¸ì¡°í•˜ë©´ ë¬´í•œ ë£¨í”„ì— ë¹ ì§„ë‹¤. 

> ë”°ë¼ì„œ jsonìœ¼ë¡œ ë°˜í™˜í• ë•ŒëŠ” ì—°ê´€ê´€ê³„ í•œìª½ì„ ëŠì–´ì¤˜ì•¼í•œë‹¤. 

```java
    @JsonIgnore
    @OneToMany(mappedBy = "member")
    private List<Order> orders = new ArrayList<>();
```

 ì´ë ‡ê²Œ @JsonIgnoreë¼ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ ì—°ê´€ê´€ê³„ í•œìª½ì— ë¶™ì—¬ì¤˜ì•¼í•œë‹¤. 
 
 ### ì§€ì—°ë¡œë”©ì— ì˜í•œ ë¬¸ì œ í•´ê²° 
 >
 ìœ„ì˜ ë°©ë²•ìœ¼ë¡œ ë¬´í•œ ë£¨í”„ë¥¼ í•´ê²°í–ˆì§€ë§Œ ì•„ì§ ë¬¸ì œê°€ ë‚¨ì•„ìˆë‹¤. 
 
 ```shell
 Type definition error: [simple type, class org.hibernate.proxy.pojo.bytebuddy.ByteBuddyInterceptor];
 ```
 
 api ì‘ë‹µì„ í•˜ë ¤ê³  í•˜ë©´ ìœ„ì˜ ì—ëŸ¬ ë©”ì‹œì§€ê°€ ë°œìƒí•œë‹¤.
 - ì´ëŠ” ì§€ì—°ë¡œë”©ì˜ í”„ë¡ì‹œ ì‚¬ìš©ìœ¼ë¡œ ì¸í•œ ë¬¸ì œì´ë‹¤. 
 - jsonìœ¼ë¡œ orderë¥¼ ë°˜í™˜í• ë•Œ memberí•„ë“œì˜ ê°’ì„ ê°™ì´ ë°˜í™˜í•´ì¤˜ì•¼í•˜ëŠ”ë° ì§€ì—°ë¡œë”©ì´ë¯€ë¡œ í”„ë¡ì‹œë§Œ ë“¤ì–´ì™€ìˆë‹¤. 
 - ğŸ“Œ ë”°ë¼ì„œ í”„ë¡ì‹œ ê°’ë§Œ ìˆë‹¤ë©´ nullê°’ì„ ë°˜í™˜í•˜ê²Œ í•´ì£¼ëŠ” ë°©ë²•ì´ í•„ìš”í•˜ë‹¤. 
 ```java
  @Bean
    Hibernate5Module hibernate5Module()
    {
        Hibernate5Module hibernate5Module = new Hibernate5Module();
//        hibernate5Module.configure(Hibernate5Module.Feature.FORCE_LAZY_LOADING,true);
        return hibernate5Module;
    }
 ```
 hibernate5Module ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•´ì£¼ë©´ ì•Œì•„ì„œ nullê°’ì„ ë°˜í™˜í•´ì¤€ë‹¤. 
 
 > ë§Œì•½ ì—°ê´€ê´€ê³„ê°€ ë§ºì–´ì ¸ ìˆëŠ” ê°’ë“¤ì„ ë°˜í™˜í•˜ê³  ì‹¶ë‹¤ë©´?
 
 ```java
 List<Order> all = orderRepository.findAllByCriteria(new OrderSearch());
        for (Order order : all) {
            order.getMember().getName();
            order.getDelivery().getAddress();
        }
 ```
 
 - ì´ì²˜ëŸ¼ í”„ë¡ì‹œ ì´ˆê¸°í™”ë¥¼ ë°”ë¡œ ì‹œì¼œì£¼ë©´ ëœë‹¤. 
 
 ---
 
 > ì¤‘ìš”í•œ ì‚¬ì‹¤ì€ ì‹¤ì œ ê°œë°œì—ì„œ ì—”í‹°í‹°ë¥¼ ì§ì ‘ ë°˜í™˜í•˜ëŠ” ì¼ì€ ìˆìœ¼ë©´ ì•ˆëœë‹¤ëŠ” ê²ƒì´ë‹¤!! 
 ìµœëŒ€í•œ DTOë¥¼ ì‚¬ìš©í•˜ì—¬ ë°˜í™˜í•˜ì. 
